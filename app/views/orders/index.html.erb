<h1>Orders</h1>

<% @orders.each do |order| %>
<table class="ui table">
  <thead>
    <tr>
      <th></th>
      <th>Product</th>
      <th>Price</th>
      <th>Quantity</th>
      <th>Total</th>
      <% if current_user.has_role? :admin %>
        <th>Seller</th>
      <% end %>
    </tr>
  </thead>

  <tbody>
    <% order.line_items.each do |item| %>
      <tr>
        <td><%= image_tag item.product.picture, Width: 60 %></td>
        <td><%= item.product.product_name %></td>
        <td><%= number_to_currency(item.product.price) %></td>
        <td><%= item.quantity %></td>
        <td><%= number_to_currency(item.total) %></td>
        <% if current_user.has_role? :admin %>
          <td><%= item.product.user.user_name %></td>
        <% end %>
      </tr>
    <% end %>
      <tr>
      <td colspan=3></td>
      <td><strong>Total Purchace:</strong></td>
      <td><strong><%= number_to_currency(order.order_total) %></strong></td>
      <% if current_user.has_role? :admin %>
        <td></td>
      <% end %>
      </tr>
  </tbody>
</table>
<h5>Purchase Date: <%= order.updated_at.asctime %></h5>
<% if current_user.has_role? :admin %>
  <h5>Purchased by: <%= order.user.email if current_user.has_role? :admin %></h5>
  <%= link_to "Edit", edit_order_path(order) %>
  <%= link_to "Delete", order_path(order), method: :delete %>
<% end %>
<br> <br> <br>
<% end %>
